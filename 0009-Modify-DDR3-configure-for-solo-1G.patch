From 9ee655b46fe74f62c757812b74f8549dd7cdc0cd Mon Sep 17 00:00:00 2001
From: Bingru Tsai <ben_tsai@avalue.com.tw>
Date: Thu, 15 Jan 2015 14:55:15 +0800
Subject: [PATCH 09/20] Modify DDR3 configure for solo-1G

---
 .../board/freescale/mx6q_smarc/flash_header.S      | 65 +++++++++-------------
 1 file changed, 26 insertions(+), 39 deletions(-)

diff --git a/bootable/bootloader/uboot-imx/board/freescale/mx6q_smarc/flash_header.S b/bootable/bootloader/uboot-imx/board/freescale/mx6q_smarc/flash_header.S
index 4d4a707..4870cbf 100644
--- a/bootable/bootloader/uboot-imx/board/freescale/mx6q_smarc/flash_header.S
+++ b/bootable/bootloader/uboot-imx/board/freescale/mx6q_smarc/flash_header.S
@@ -108,10 +108,10 @@ MXC_DCD_ITEM(27, MMDC_P0_BASE_ADDR + 0x800, 0xA1390003)
 MXC_DCD_ITEM(28, MMDC_P0_BASE_ADDR + 0x80c, 0x001F001F)
 MXC_DCD_ITEM(29, MMDC_P0_BASE_ADDR + 0x810, 0x001F001F)
 
-MXC_DCD_ITEM(30, MMDC_P0_BASE_ADDR + 0x83c, 0x4224021F)
-MXC_DCD_ITEM(31, MMDC_P0_BASE_ADDR + 0x840, 0x020C020F)
-MXC_DCD_ITEM(32, MMDC_P0_BASE_ADDR + 0x848, 0x4F504D4D)
-MXC_DCD_ITEM(33, MMDC_P0_BASE_ADDR + 0x850, 0x41322E31)
+MXC_DCD_ITEM(30, MMDC_P0_BASE_ADDR + 0x83c, 0x4234022C)
+MXC_DCD_ITEM(31, MMDC_P0_BASE_ADDR + 0x840, 0x02100218)
+MXC_DCD_ITEM(32, MMDC_P0_BASE_ADDR + 0x848, 0x42444846)
+MXC_DCD_ITEM(33, MMDC_P0_BASE_ADDR + 0x850, 0x38342C36)
 
 MXC_DCD_ITEM(34, MMDC_P0_BASE_ADDR + 0x81c, 0x33333333)
 MXC_DCD_ITEM(35, MMDC_P0_BASE_ADDR + 0x820, 0x33333333)
@@ -122,28 +122,17 @@ MXC_DCD_ITEM(38, MMDC_P0_BASE_ADDR + 0x8b8, 0x00000800)
 
 MXC_DCD_ITEM(39, MMDC_P0_BASE_ADDR + 0x004, 0x0002002D)
 MXC_DCD_ITEM(40, MMDC_P0_BASE_ADDR + 0x008, 0x00333030)
-MXC_DCD_ITEM(41, MMDC_P0_BASE_ADDR + 0x00c, 0x3F435313)
+MXC_DCD_ITEM(41, MMDC_P0_BASE_ADDR + 0x00c, 0x676B5333)
+
 MXC_DCD_ITEM(42, MMDC_P0_BASE_ADDR + 0x010, 0xB66E8B63)
 MXC_DCD_ITEM(43, MMDC_P0_BASE_ADDR + 0x014, 0x01FF00DB)
 MXC_DCD_ITEM(44, MMDC_P0_BASE_ADDR + 0x018, 0x00001740)
 
 MXC_DCD_ITEM(45, MMDC_P0_BASE_ADDR + 0x01c, 0x00008000)
 MXC_DCD_ITEM(46, MMDC_P0_BASE_ADDR + 0x02c, 0x000026d2)
-
-MXC_DCD_ITEM(47, MMDC_P0_BASE_ADDR + 0x030, 0x00431023)
-
-#ifdef	NEW_VERSION_SMARC
+MXC_DCD_ITEM(47, MMDC_P0_BASE_ADDR + 0x030, 0x006B1023)
 MXC_DCD_ITEM(48, MMDC_P0_BASE_ADDR + 0x040, 0x00000027)
-#else
-MXC_DCD_ITEM(48, MMDC_P0_BASE_ADDR + 0x040, 0x00000017)
-#endif
-
-#ifdef	NEW_VERSION_SMARC
 MXC_DCD_ITEM(49, MMDC_P0_BASE_ADDR + 0x000, 0x84190000)
-#else
-MXC_DCD_ITEM(49, MMDC_P0_BASE_ADDR + 0x000, 0x83190000)
-#endif
-
 MXC_DCD_ITEM(50, MMDC_P0_BASE_ADDR + 0x01c, 0x04008032)
 MXC_DCD_ITEM(51, MMDC_P0_BASE_ADDR + 0x01c, 0x00008033)
 MXC_DCD_ITEM(52, MMDC_P0_BASE_ADDR + 0x01c, 0x00048031)
@@ -282,8 +271,8 @@ MXC_DCD_ITEM(83, MMDC_P0_BASE_ADDR + 0x01c, 0x00000000)
 #else  /* i.MX6Q */
 
 #ifdef MEMORY_2G_SMARC
-dcd_hdr:          .word 0x40D802d2 /* Tag=0xD2, Len=83*8 + 4 + 4, Ver=0x40 */
-write_dcd_cmd:    .word 0x04D402cc /* Tag=0xCC, Len=83*8 + 4, Param=0x04 */
+dcd_hdr:          .word 0x40C802d2 /* Tag=0xD2, Len=83*8 + 4 + 4, Ver=0x40 */
+write_dcd_cmd:    .word 0x04C402cc /* Tag=0xCC, Len=83*8 + 4, Param=0x04 */
 
 MXC_DCD_ITEM(1,0x020e0798,0x000c0000)
 MXC_DCD_ITEM(2,0x020e0758,0x00000000)
@@ -356,25 +345,23 @@ MXC_DCD_ITEM(68,0x021b001c,0x00008000)
 MXC_DCD_ITEM(69,0x021b002c,0x000026d2)
 MXC_DCD_ITEM(70,0x021b0030,0x008F1023)
 MXC_DCD_ITEM(71,0x021b0040,0x00000047)
-MXC_DCD_ITEM(72,0x021b0400,0x11420000)
-MXC_DCD_ITEM(73,0x021b4400,0x11420000)
-MXC_DCD_ITEM(74,0x021b0000,0x841a0000)
-MXC_DCD_ITEM(75,0x021b001c,0x04088032)
-MXC_DCD_ITEM(76,0x021b001c,0x0408803a)
-MXC_DCD_ITEM(77,0x021b001c,0x00008033)
-MXC_DCD_ITEM(78,0x021b001c,0x0000803b)
-MXC_DCD_ITEM(79,0x021b001c,0x00048031)
-MXC_DCD_ITEM(80,0x021b001c,0x00048039)
-MXC_DCD_ITEM(81,0x021b001c,0x09408030)
-MXC_DCD_ITEM(82,0x021b001c,0x09408038)
-MXC_DCD_ITEM(83,0x021b001c,0x04008040)
-MXC_DCD_ITEM(84,0x021b001c,0x04008048)
-MXC_DCD_ITEM(85,0x021b0020,0x00005800)
-MXC_DCD_ITEM(86,0x021b0818,0x00011117)
-MXC_DCD_ITEM(87,0x021b4818,0x00011117)
-MXC_DCD_ITEM(88,0x021b0004,0x00025576)
-MXC_DCD_ITEM(89,0x021b0404,0x00011006)
-MXC_DCD_ITEM(90,0x021b001c,0x00000000)
+MXC_DCD_ITEM(72,0x021b0000,0x841a0000)
+MXC_DCD_ITEM(73,0x021b001c,0x04088032)
+MXC_DCD_ITEM(74,0x021b001c,0x0408803a)
+MXC_DCD_ITEM(75,0x021b001c,0x00008033)
+MXC_DCD_ITEM(76,0x021b001c,0x0000803b)
+MXC_DCD_ITEM(77,0x021b001c,0x00048031)
+MXC_DCD_ITEM(78,0x021b001c,0x00048039)
+MXC_DCD_ITEM(79,0x021b001c,0x09408030)
+MXC_DCD_ITEM(80,0x021b001c,0x09408038)
+MXC_DCD_ITEM(81,0x021b001c,0x04008040)
+MXC_DCD_ITEM(82,0x021b001c,0x04008048)
+MXC_DCD_ITEM(83,0x021b0020,0x00005800)
+MXC_DCD_ITEM(84,0x021b0818,0x00011117)
+MXC_DCD_ITEM(85,0x021b4818,0x00011117)
+MXC_DCD_ITEM(86,0x021b0004,0x00025576)
+MXC_DCD_ITEM(87,0x021b0404,0x00011006)
+MXC_DCD_ITEM(88,0x021b001c,0x00000000)
 
 #else /* i.MX6Q 1G */
 dcd_hdr:          .word 0x40a002D2 /* Tag=0xD2, Len=83*8 + 4 + 4, Ver=0x40 */
-- 
1.9.1

